(this["webpackJsonpreact-kabsda"]=this["webpackJsonpreact-kabsda"]||[]).push([[0],{132:function(e,t,n){e.exports={allPostItem:"post_allPostItem__3MCr0"}},134:function(e,t,n){e.exports={formSummaryError:"login_formSummaryError__1CLBZ"}},135:function(e,t,n){e.exports={messagesItem:"messages_messagesItem__zDDc7"}},14:function(e,t,n){e.exports={nav:"navbar_nav__1OQBS",navList:"navbar_navList__gxlS4",navItem:"navbar_navItem__8CEqP",navLink:"navbar_navLink__31R7O",activeLink:"navbar_activeLink__2nxZ7"}},166:function(e,t,n){},167:function(e,t,n){},17:function(e,t,n){e.exports={user:"users_user__2Ok6B",userItem:"users_userItem__36Zde",userItemLeft:"users_userItemLeft__3HTNa",userImg:"users_userImg__2RGkM",userImgBtn:"users_userImgBtn__n0LEE",userItemRight:"users_userItemRight__2Dyk9",userItemInfo:"users_userItemInfo__Uc6xm",fullName:"users_fullName__3E-cp",status:"users_status__3RMMX",userItemLocation:"users_userItemLocation__2092L"}},291:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n.n(s),a=n(65),o=n.n(a),i=(n(166),n(26)),c=n(27),u=n(29),l=n(28),j=(n(167),n(14)),d=n.n(j),f=n(13),p=n(0),b=function(){return Object(p.jsx)("nav",{className:d.a.nav,children:Object(p.jsxs)("ul",{className:d.a.navList,children:[Object(p.jsx)("li",{className:d.a.navItem,children:Object(p.jsx)(f.b,{to:"/profile",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Profile"})}),Object(p.jsx)("li",{className:d.a.navItem,children:Object(p.jsx)(f.b,{to:"/dialogs",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Messages"})}),Object(p.jsx)("li",{className:d.a.navItem,children:Object(p.jsx)(f.b,{to:"/news",className:d.a.navLink,activeClassName:d.a.activeLink,children:"News"})}),Object(p.jsx)("li",{className:d.a.navItem,children:Object(p.jsx)(f.b,{to:"/music",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Music"})}),Object(p.jsx)("li",{className:d.a.navItem,children:Object(p.jsx)(f.b,{to:"/settings",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Settings"})}),Object(p.jsx)("li",{className:d.a.navItem,children:Object(p.jsx)(f.b,{to:"/users",className:d.a.navLink,activeClassName:d.a.activeLink,children:"Users"})})]})})},g=n(12),m=n(10),O=n(11),h=n.n(O),v=n(20),x=n(30),_=n(5),P=n(129),w=n.n(P).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"e9bb7575-f3f2-43a8-ae9c-91b6f34b931d"}}),I={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return w.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return w.post("follow/".concat(e))},unfollow:function(e){return w.delete("follow/".concat(e))},getProfile:function(e){return console.warn("Obsolete method. Please use profileAPI object"),N.getProfile(e)}},N={getProfile:function(e){return w.get("profile/"+e)},getStatus:function(e){return w.get("profile/status/"+e)},updateStatus:function(e){return w.put("profile/status/",{status:e})}},E=function(){return w.get("auth/me")},y=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return w.post("auth/login",{email:e,password:t,rememberMe:n})},S=function(){return w.delete("auth/login")},k=function(e,t,n,s){e.map((function(e){return e[n]===t?Object(_.a)(Object(_.a)({},e),{},{newObjProps:s}):e}))},A="FOLLOW",L="UN_FOLLOW",C="SET_USERS",B="SET_CURRENT_PAGE",z="SET_TOTAL_USER_COUNT",U="TOGGLE_IS_FETCHING",M="TOGGLE_IS_FOLLOWING_PROGRESS",T={users:[],pageSize:5,totalUsersCount:0,currentPage:1,isFetching:!0,followingInProgress:[]},D=function(e){return{type:A,userId:e}},Q=function(e){return{type:L,userId:e}},Z=function(e){return{type:B,currentPage:e}},R=function(e){return{type:U,isFetching:e}},V=function(e,t){return{type:M,isFetching:e,userId:t}},F=function(){var e=Object(v.a)(h.a.mark((function e(t,n,s,r){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(V(!0,n)),e.next=3,s(n);case 3:0===e.sent.data.resultCode&&t(r(n)),t(V(!1,n));case 6:case"end":return e.stop()}}),e)})));return function(t,n,s,r){return e.apply(this,arguments)}}(),W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(_.a)(Object(_.a)({},e),{},{users:k(e.users,t.userId,"id",{folllowed:!0})});case L:return Object(_.a)(Object(_.a)({},e),{},{users:k(e.users,t.userId,"id",{folllowed:!1})});case C:return Object(_.a)(Object(_.a)({},e),{},{users:Object(x.a)(t.users)});case B:return Object(_.a)(Object(_.a)({},e),{},{currentPage:t.currentPage});case z:return Object(_.a)(Object(_.a)({},e),{},{totalUsersCount:t.count});case U:return Object(_.a)(Object(_.a)({},e),{},{isFetching:t.isFetching});case M:return Object(_.a)(Object(_.a)({},e),{},{followingInProgress:t.isFetching?[].concat(Object(x.a)(e.followingInProgress),[t.userId]):e.followingInProgress.filter((function(e){return e!==t.userId}))});default:return e}},G=n(70),H=n(17),Y=n.n(H),X=n(68),J=n(55),K=n(92),q=n.n(K),$=n(130),ee=n.n($),te=function(e){for(var t=e.totalItemsCount,n=e.pageSize,r=e.currentPage,a=e.onPageChanged,o=e.portionSize,i=void 0===o?10:o,c=Math.ceil(t/n),u=[],l=1;l<=c;l++)u.push(l);var j=Math.ceil(c/i),d=Object(s.useState)(1),f=Object(J.a)(d,2),b=f[0],g=f[1],m=(b-1)*i+1,O=b*i;return Object(p.jsxs)("div",{children:[b>1&&Object(p.jsx)("button",{onClick:function(){return g(b-1)},children:"Prev"}),u.filter((function(e){return e>=m&&e<=O})).map((function(e){return Object(p.jsx)("span",{className:ee()(Object(X.a)({},q.a.selectedPage,r===e),q.a.pageNumber),onClick:function(t){a(e)},children:e},e)})),j>b&&Object(p.jsx)("button",{onClick:function(){g(b+1)},children:"NEXT"})]})},ne=n.p+"static/media/user.e8348d6f.png",se=function(e){var t=e.user;return Object(p.jsx)(f.b,{to:"/profile/"+t.id,children:Object(p.jsx)("img",{src:null!=t.photos.small?t.photos.small:ne,className:Y.a.userImg,alt:"small"})})},re=function(e){var t=e.user,n=e.followingInProgress,s=e.unfollow,r=e.follow;return Object(p.jsxs)("li",{className:Y.a.userItem,children:[Object(p.jsxs)("div",{className:Y.a.userItemLeft,children:[Object(p.jsx)(se,{user:t}),t.followed?Object(p.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){s(t.id)},className:Y.a.userImgBtn,children:"unFollow"}):Object(p.jsx)("button",{disabled:n.some((function(e){return e===t.id})),onClick:function(){r(t.id)},className:Y.a.userImgBtn,children:"follow"})]}),Object(p.jsxs)("div",{className:Y.a.userItemRight,children:[Object(p.jsxs)("div",{className:Y.a.userItemInfo,children:[Object(p.jsx)("span",{className:Y.a.fullName,children:t.name}),Object(p.jsx)("span",{className:Y.a.status,children:(t.status,t.status)})]}),Object(p.jsxs)("div",{className:Y.a.userItemLocation,children:["user.location.country",Object(p.jsx)("br",{}),"user.location.city"]})]})]})},ae=["currentPage","onPageChanged","totalItemsCount","pageSize","users"],oe=function(e){var t=e.currentPage,n=e.onPageChanged,s=e.totalItemsCount,r=e.pageSize,a=e.users,o=Object(G.a)(e,ae);return Object(p.jsxs)("div",{children:[Object(p.jsx)(te,{currentPage:t,onPageChanged:n,totalItemsCount:s,pageSize:r}),Object(p.jsx)("ul",{className:Y.a.user,children:a.map((function(e){return Object(p.jsx)(re,{user:e,followingInProgress:o.followingInProgress,unfollow:o.unfollow,follow:o.follow},e.id)}))})]})},ie=n.p+"static/media/Spinner-1s-200px.93ad5c12.svg",ce=function(e){return Object(p.jsx)("img",{src:ie,alt:"preloader"})},ue=n(9),le=n(131),je=Object(le.a)((function(e){return e.usersPage.users}),(function(e){return e.filter((function(e){return!0}))})),de=function(e){return e.usersPage.pageSize},fe=function(e){return e.usersPage.totalUsersCount},pe=function(e){return e.usersPage.currentPage},be=function(e){return e.usersPage.isFetching},ge=function(e){return e.usersPage.followingInProgress},me=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(i.a)(this,n);for(var s=arguments.length,r=new Array(s),a=0;a<s;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).onPageChanged=function(t){var n=e.props.pageSize;e.props.getUsers(t,n)},e}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.currentPage,n=e.pageSize;this.props.getUsers(t,n)}},{key:"render",value:function(){return Object(p.jsxs)(p.Fragment,{children:[this.props.isFetching?Object(p.jsx)(ce,{}):null,Object(p.jsx)(oe,{totalItemsCount:this.props.totalItemsCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,users:this.props.users,follow:this.props.follow,unfollow:this.props.unfollow,followingInProgress:this.props.followingInProgress})]})}}]),n}(r.a.Component),Oe=Object(ue.d)(Object(m.b)((function(e){return{users:je(e),pageSize:de(e),totalItemsCount:fe(e),currentPage:pe(e),isFetching:be(e),followingInProgress:ge(e)}}),{follow:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:F(n,e,I.follow.bind(I),D);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},unfollow:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:F(n,e,I.unfollow.bind(I),Q);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},setCurrentPage:Z,toggleFollowingProgress:V,getUsers:function(e,t){return function(){var n=Object(v.a)(h.a.mark((function n(s){var r;return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(R(!0)),s(Z(e)),n.next=4,I.getUsers(e,t);case 4:r=n.sent,s(R(!1)),s((o=r.items,{type:C,users:o})),s((a=r.totalCount,{type:z,count:a}));case 8:case"end":return n.stop()}var a,o}),n)})));return function(e){return n.apply(this,arguments)}}()}}))(me),he=n(93),ve=n.n(he),xe=n(71),_e=n.n(xe),Pe=function(e){var t=Object(s.useState)(!1),n=Object(J.a)(t,2),r=n[0],a=n[1],o=Object(s.useState)(e.status),i=Object(J.a)(o,2),c=i[0],u=i[1];Object(s.useEffect)((function(){u(e.status)}),[e.status]);return Object(p.jsxs)("div",{children:[!r&&Object(p.jsx)("span",{onDoubleClick:function(){a(!0)},children:e.status||"-----"}),r&&Object(p.jsx)("input",{autoFocus:!0,onBlur:function(){a(!1),e.updateStatus(c)},onChange:function(e){u(e.currentTarget.value)},value:c})]})},we=function(e){var t=e.profile,n=e.status,s=e.updateStatus;return t?Object(p.jsxs)("div",{className:_e.a.userProfile,children:[Object(p.jsx)("img",{className:_e.a.profileImg,src:null!=t.photos.large?t.photos.large:ne,alt:"user"}),Object(p.jsxs)("div",{className:_e.a.userProfileInfo,children:["Personal Info",Object(p.jsx)(Pe,{status:n,updateStatus:s})]})]}):Object(p.jsx)(ce,{})},Ie="ADD_POST",Ne="SET_USER_PROFILE",Ee="SET_STATUS",ye="DELETE_POST",Se={posts:[{id:1,post:"Hi, how are you?",likesCount:14},{id:2,post:"Yo",likesCount:20},{id:3,post:"Hello world",likesCount:120}],profile:null,status:""},ke=function(e){return{type:Ee,status:e}},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ie:var n={id:6,post:t.newPostText,likesCount:1};return Object(_.a)(Object(_.a)({},e),{},{posts:[].concat(Object(x.a)(e.posts),[n])});case Ne:return Object(_.a)(Object(_.a)({},e),{},{profile:t.profile});case Ee:return Object(_.a)(Object(_.a)({},e),{},{status:t.status});case ye:return Object(_.a)(Object(_.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.postId}))});default:return e}},Le=n(44),Ce=n.n(Le),Be=n(132),ze=n.n(Be),Ue=function(e){return Object(p.jsxs)("li",{className:ze.a.allPostItem,children:[Object(p.jsx)("a",{href:"#",children:e.message}),Object(p.jsx)("span",{children:e.like})]})},Me=n(126),Te=n(127),De=function(e){if(!e)return"field is required"},Qe=function(e){return function(t){if(t.length>e)return"maxlength is ".concat(e)}},Ze=n(56),Re=n.n(Ze),Ve=["input","meta"],Fe=function(e){var t=e.input,n=e.meta,s=n.touched,r=n.error,a=Object(G.a)(e,Ve),o=s&&r;return Object(p.jsxs)("div",{children:[Object(p.jsx)("input",Object(_.a)(Object(_.a)({className:o?Re.a.inputPost+" "+Re.a.error:Re.a.inputPost},t),a)),o&&Object(p.jsx)("span",{className:Re.a.textError,children:r})]})},We=function(e,t,n,s){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(p.jsxs)("div",{children:[Object(p.jsx)(Me.a,Object(_.a)({placeholder:e,name:t,component:s,validate:n},r)),a]})},Ge=Qe(50),He=Object(Te.a)({form:"ProfileAddNewPostForm"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,className:Ce.a.newPost,children:[Object(p.jsx)(Me.a,{name:"newPostText",component:Fe,placeholder:"Post message",validate:[De,Ge]}),Object(p.jsx)("button",{className:Ce.a.addPost,children:"Add"})]})})),Ye=r.a.memo((function(e){var t=Object(x.a)(e.posts).reverse().map((function(e){return Object(p.jsx)(Ue,{message:e.post,like:e.likesCount})}));return Object(p.jsxs)("div",{className:Ce.a.posts,children:[Object(p.jsx)("span",{className:Ce.a.postsText,children:"My posts"}),Object(p.jsx)(He,{onSubmit:function(t){e.addPost(t.newPostText)}}),Object(p.jsx)("ul",{className:Ce.a.allPost,children:t})]})})),Xe=Object(m.b)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:Ie,newPostText:e}}(t))}}}))(Ye),Je=function(e){return Object(p.jsxs)("div",{className:ve.a.profile,children:[Object(p.jsx)("img",{className:ve.a.profileBackground,src:"https://content.skyscnr.com/m/1b51182679225810/original/GettyImages-147444574_doc.jpg?resize=1800px:1800px&quality=100",alt:"background"}),Object(p.jsx)(we,{profile:e.profile,status:e.status,updateStatus:e.updateStatus}),Object(p.jsx)(Xe,{})]})},Ke=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e=this.props.authorizedUserId)||this.props.history.push("/login"),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"render",value:function(){return Object(p.jsx)(Je,Object(_.a)(Object(_.a)({},this.props),{},{users:this.props.users,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus}))}}]),n}(r.a.Component),qe=Object(ue.d)(Object(m.b)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,authorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getProfile(e);case 2:s=t.sent,n((r=s.data,{type:Ne,profile:r}));case 4:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},getStatus:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n){var s;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.getStatus(e);case 2:s=t.sent,n(ke(s.data));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateStatus:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.updateStatus(e);case 2:0===t.sent.data.resultCode&&n(ke(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),g.f)(Ke),$e=n.p+"static/media/logo.6ce24c58.svg",et=n(73),tt=n.n(et),nt=function(e){return Object(p.jsxs)("header",{className:tt.a.header,children:[Object(p.jsx)("img",{src:"data:image/png;base64,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",alt:$e}),Object(p.jsx)("div",{className:tt.a.loginBlock,children:e.isAuth?Object(p.jsxs)("div",{children:[e.login," ",Object(p.jsx)("button",{onClick:e.logout,children:"Logout"})]}):Object(p.jsx)(f.b,{to:"/login",className:tt.a.loginLink,children:"Login"})})]})},st=n(37),rt="SET_USER_DATA",at={id:null,email:null,login:null,isAuth:!1},ot=function(e,t,n,s){return{type:rt,payload:{userId:e,email:t,login:n,isAuth:s}}},it=function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){var n,s,r,a,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:0===(n=e.sent).data.resultCode&&(s=n.data.data,r=s.id,a=s.email,o=s.login,t(ot(r,a,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case rt:return Object(_.a)(Object(_.a)({},e),t.payload);default:return e}},ut=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(p.jsx)(nt,Object(_.a)({},this.props))}}]),n}(r.a.Component),lt=Object(m.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.login}}),{logout:function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S();case 2:0===e.sent.data.resultCode&&t(ot(null,null,null,!1));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}})(ut),jt=n(134),dt=n.n(jt),ft=Object(Te.a)({form:"login"})((function(e){var t=e.handleSubmit,n=e.error;return Object(p.jsxs)("form",{onSubmit:t,children:[We("Email","email",[De],Fe),We("Password","password",[De],Fe,{type:"password"}),We(null,"rememberMe",[De],Fe,{type:"checkbox"},"remember me"),n&&Object(p.jsx)("div",{className:dt.a.formSummaryError,children:n}),Object(p.jsx)("button",{children:"Submit"})]})})),pt=Object(m.b)((function(e){return{isAuth:e.auth.isAuth}}),{login:function(e,t,n){return function(){var s=Object(v.a)(h.a.mark((function s(r){var a,o;return h.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,y(e,t,n);case 2:0===(a=s.sent).data.resultCode?r(it()):(o=a.data.messages.length>0?a.data.messages[0]:"Some error",r(Object(st.a)("login",{_error:o})));case 4:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}})((function(e){return e.isAuth?Object(p.jsx)(g.a,{to:"/profile"}):Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Login"}),Object(p.jsx)(ft,{onSubmit:function(t){e.login(t.email,t.password,t.rememberMe)}})]})})),bt="INITIALIZED_SUCCESS",gt={initialized:!1},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case bt:return Object(_.a)(Object(_.a)({},e),{},{initialized:!0});default:return e}},Ot=function(e){return function(t){return Object(p.jsx)(r.a.Suspense,{fallback:Object(p.jsx)(ce,{}),children:Object(p.jsx)(e,Object(_.a)({},t))})}},ht="SEND_MESSAGE",vt={messages:[{id:1,message:"Hi, how are you?"},{id:2,message:"Yo"},{id:3,message:"Hello world"}],dialogs:[{id:1,name:"Dimych"},{id:2,name:"Sveta"},{id:3,name:"Sasha"},{id:4,name:"Valera"},{id:5,name:"Andrey"}]},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:var n=t.newMessageBody;return Object(_.a)(Object(_.a)({},e),{},{newMessageBody:"",messages:[].concat(Object(x.a)(e.messages),[{id:6,message:n}])});default:return e}},_t=n(45),Pt=n.n(_t),wt=n(96),It=n.n(wt),Nt=function(e){var t="/dialogs/"+e.id;return Object(p.jsx)("li",{className:It.a.dialogsItem,children:Object(p.jsx)(f.b,{to:t,activeClassName:It.a.activeLink,children:e.name})})},Et=n(135),yt=n.n(Et),St=function(e){return Object(p.jsx)("li",{className:yt.a.messagesItem,children:e.message})},kt=Qe(50),At=Object(Te.a)({form:"dialogAddMessageForm"})((function(e){return Object(p.jsxs)("form",{onSubmit:e.handleSubmit,className:Pt.a.newMessageBlock,children:[Object(p.jsx)(Me.a,{component:Fe,validate:[De,kt],name:"newMessageBody",placeholder:"Enter your message"}),Object(p.jsx)("button",{className:Pt.a.sendNewMessageBtn,children:"Send"})]})})),Lt=function(e){var t=e.dialogPage,n=t.dialogs.map((function(e){return Object(p.jsx)(Nt,{name:e.name,id:e.id},e.id)})),s=t.messages.map((function(e){return Object(p.jsx)(St,{message:e.message},e.id)}));return e.isAuth?Object(p.jsxs)("div",{className:Pt.a.dialogs,children:[Object(p.jsx)("ul",{className:Pt.a.dialogsList,children:n}),Object(p.jsxs)("div",{children:[Object(p.jsx)("ul",{className:Pt.a.messages,children:s}),Object(p.jsx)(At,{onSubmit:function(t){e.sendMessage(t.newMessageBody)}})]})]}):Object(p.jsx)(g.a,{to:"/login"})},Ct=function(e){return{isAuth:e.auth.isAuth}},Bt=Object(ue.d)(Object(m.b)((function(e){return{dialogPage:e.dialogPage}}),(function(e){return{sendMessage:function(t){e(function(e){return{type:ht,newMessageBody:e}}(t))}}})),(function(e){var t=function(t){Object(u.a)(s,t);var n=Object(l.a)(s);function s(){return Object(i.a)(this,s),n.apply(this,arguments)}return Object(c.a)(s,[{key:"render",value:function(){return this.props.isAuth?Object(p.jsx)(e,Object(_.a)({},this.props)):Object(p.jsx)(g.a,{to:"/login"})}}]),s}(r.a.Component);return Object(m.b)(Ct)(t)}))(Lt),zt=n(136),Ut=n(128),Mt=Object(ue.c)({profilePage:Ae,dialogPage:xt,usersPage:W,auth:ct,form:Ut.a,app:mt}),Tt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.d,Dt=Object(ue.e)(Mt,Tt(Object(ue.a)(zt.a)));window.__store__=Dt;var Qt=Dt,Zt=function(e){Object(u.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initialized?Object(p.jsxs)("div",{className:"site-container container",children:[Object(p.jsx)(lt,{}),Object(p.jsx)(b,{}),Object(p.jsxs)("div",{className:"rightContent",children:[Object(p.jsx)(g.b,{path:"/dialogs",render:Ot(Bt)}),Object(p.jsx)(g.b,{path:"/profile/:userId?",render:Ot(qe)}),Object(p.jsx)(g.b,{path:"/users",render:function(){return Object(p.jsx)(Oe,{})}}),Object(p.jsx)(g.b,{path:"/login",render:function(){return Object(p.jsx)(pt,{})}})]})]}):Object(p.jsx)(ce,{})}}]),n}(s.Component),Rt=Object(ue.d)(g.f,Object(m.b)((function(e){return{initialized:e.app.initialized}}),{initializeApp:function(){return function(e){var t=e(it());Promise.all([t]).then((function(){e({type:bt})}))}}}))(Zt),Vt=function(e){return Object(p.jsx)(f.a,{basename:"/react-social-practice",children:Object(p.jsx)(m.a,{store:Qt,children:Object(p.jsx)(Rt,{})})})},Ft=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,292)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),s(e),r(e),a(e),o(e)}))};o.a.render(Object(p.jsx)(f.a,{children:Object(p.jsx)(m.a,{store:Qt,children:Object(p.jsx)(Vt,{})})}),document.getElementById("root")),Ft()},44:function(e,t,n){e.exports={posts:"myPosts_posts__39BML",allPost:"myPosts_allPost__1Yxnv",postsText:"myPosts_postsText__iNRDu",newPost:"myPosts_newPost__8yzME",inputPost:"myPosts_inputPost__i3b4Z",addPost:"myPosts_addPost__2eF8u"}},45:function(e,t,n){e.exports={dialogs:"dialogs_dialogs__H6fTw",dialogsList:"dialogs_dialogsList__3z4Sm",messages:"dialogs_messages__3IM7F",newMessageBlock:"dialogs_newMessageBlock__Xg9AK",newMessageText:"dialogs_newMessageText__lNBpO",sendNewMessageBtn:"dialogs_sendNewMessageBtn__36ifu"}},56:function(e,t,n){e.exports={inputPost:"formControls_inputPost__2V2rC",error:"formControls_error__bylv2",textError:"formControls_textError__1jr9b"}},71:function(e,t,n){e.exports={userProfile:"profileInfo_userProfile__Ov28D",profileImg:"profileInfo_profileImg__3RnE0",userProfileInfo:"profileInfo_userProfileInfo__28oS1"}},73:function(e,t,n){e.exports={header:"header_header__2x9En",loginLink:"header_loginLink__LRkws"}},92:function(e,t,n){e.exports={selectedPage:"paginator_selectedPage__1ZtNd",noSelectedPage:"paginator_noSelectedPage__1WJ_c",paginator:"paginator_paginator__1QN_J",pageNumber:"paginator_pageNumber__3l7b-"}},93:function(e,t,n){e.exports={profileBackground:"profile_profileBackground__36wvi"}},96:function(e,t,n){e.exports={dialogsItem:"dialogItem_dialogsItem__n8Emj",activeLink:"dialogItem_activeLink__fbcsy"}}},[[291,1,2]]]);
//# sourceMappingURL=main.021e58ff.chunk.js.map